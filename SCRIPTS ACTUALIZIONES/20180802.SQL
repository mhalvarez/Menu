ALTER TABLE TH_ASNT
 ADD (ASNT_MORA_COD_PROCEDENCIA  VARCHAR2(25));


COMMENT ON COLUMN TH_ASNT.ASNT_MORA_COD_PROCEDENCIA IS 'Codigo de Procedencia';



CREATE TABLE TH_RECI
(
  RECI_CODI   NUMBER,
  RECI_ANCI   NUMBER,
  RECI_DATR   DATE,
  SECC_CODI   VARCHAR2(15 CHAR),
  RECI_VALO   NUMBER,
  RECI_SALDO  NUMBER,
  RESE_CODI   NUMBER,
  RESE_ANCI   NUMBER,
  CCEX_CODI   VARCHAR2(15 CHAR)
)
TABLESPACE USERS
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;

COMMENT ON COLUMN TH_RECI.RECI_DATR IS 'Fecha del Recibo';

COMMENT ON COLUMN TH_RECI.RECI_VALO IS 'Valor Total del Recibo';

COMMENT ON COLUMN TH_RECI.RECI_SALDO IS 'Saldo del Recibo';


CREATE UNIQUE INDEX TH_RECI_PK ON TH_RECI
(RECI_CODI, RECI_ANCI)
LOGGING
TABLESPACE USERS
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


ALTER TABLE TH_RECI ADD (
  CONSTRAINT TH_RECI_PK
  PRIMARY KEY
  (RECI_CODI, RECI_ANCI)
  USING INDEX TH_RECI_PK);


CREATE TABLE TH_RECI_MOVI
(
  RECI_CODI  NUMBER                             NOT NULL,
  RECI_ANCI  NUMBER                             NOT NULL,
  RECI_KEY   NUMBER                             NOT NULL,
  RECI_DATM  DATE,
  RECI_MOVI  NUMBER
)
TABLESPACE USERS
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;

COMMENT ON TABLE TH_RECI_MOVI IS 'Detalle de Detracciones del Recibo';

COMMENT ON COLUMN TH_RECI_MOVI.RECI_DATM IS 'Fecha de la Detraccion';

COMMENT ON COLUMN TH_RECI_MOVI.RECI_MOVI IS 'Valor de la Detraccion';


CREATE UNIQUE INDEX TH_RECI_MOVI_PK ON TH_RECI_MOVI
(RECI_CODI, RECI_ANCI, RECI_KEY)
LOGGING
TABLESPACE USERS
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


ALTER TABLE TH_RECI_MOVI ADD (
  CONSTRAINT TH_RECI_MOVI_PK
  PRIMARY KEY
  (RECI_CODI, RECI_ANCI, RECI_KEY)
  USING INDEX TH_RECI_MOVI_PK);






alter session set nls_language = 'AMERICAN';
alter session set nls_territory = 'AMERICA';
alter session set nls_date_format = 'DD-MON-YYYY';
  
UPDATE TH_PARA SET PARA_PAT_NUM = 'PAT0041';
UPDATE TH_PARA SET PARA_FECHA_BASE = '02-AUG-2018';
UPDATE TH_PARA SET PARA_FECHA_EXE  = '02-AUG-2018';

COMMIT;